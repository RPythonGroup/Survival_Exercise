<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="RPythonStudyGroup feat. ChatGPT">
<meta name="dcterms.date" content="2025-02-03">
<meta name="description" content="ìµëª…í™”ëœ ìë£Œë¡œ ì—°ìŠµí•˜ê¸°">

<title>Survival Analysis with an deidentified Thyroid Cancer Dataset â€“ R441-Survival_Exercise</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ddd961a2510921635943dfbbd19534c4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R441-Survival_Exercise</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#git-clone" id="toc-git-clone" class="nav-link active" data-scroll-target="#git-clone">git clone</a></li>
  <li><a href="#readrds" id="toc-readrds" class="nav-link" data-scroll-target="#readrds">readRDS</a></li>
  <li><a href="#mytable" id="toc-mytable" class="nav-link" data-scroll-target="#mytable">mytable</a></li>
  <li><a href="#surví•¨ìˆ˜" id="toc-surví•¨ìˆ˜" class="nav-link" data-scroll-target="#surví•¨ìˆ˜">Surví•¨ìˆ˜</a></li>
  <li><a href="#plot" id="toc-plot" class="nav-link" data-scroll-target="#plot">plot</a></li>
  <li><a href="#ì¤‘ì•™ê°’-ìƒì¡´ê¸°ê°„" id="toc-ì¤‘ì•™ê°’-ìƒì¡´ê¸°ê°„" class="nav-link" data-scroll-target="#ì¤‘ì•™ê°’-ìƒì¡´ê¸°ê°„">ì¤‘ì•™ê°’ ìƒì¡´ê¸°ê°„</a></li>
  <li><a href="#í‰ê· ìƒì¡´ê¸°ê°„" id="toc-í‰ê· ìƒì¡´ê¸°ê°„" class="nav-link" data-scroll-target="#í‰ê· ìƒì¡´ê¸°ê°„">í‰ê· ìƒì¡´ê¸°ê°„</a></li>
  <li><a href="#survfití•¨ìˆ˜ì™€-ê°ì²´" id="toc-survfití•¨ìˆ˜ì™€-ê°ì²´" class="nav-link" data-scroll-target="#survfití•¨ìˆ˜ì™€-ê°ì²´">survfití•¨ìˆ˜ì™€ ê°ì²´</a>
  <ul class="collapse">
  <li><a href="#kaplan-meier-ê¸°ë°˜" id="toc-kaplan-meier-ê¸°ë°˜" class="nav-link" data-scroll-target="#kaplan-meier-ê¸°ë°˜">Kaplan-Meier ê¸°ë°˜</a></li>
  <li><a href="#cox-model-ê¸°ë°˜" id="toc-cox-model-ê¸°ë°˜" class="nav-link" data-scroll-target="#cox-model-ê¸°ë°˜">cox model ê¸°ë°˜</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">summary</a></li>
  <li><a href="#summary-ê¸°ê°„ì§€ì •" id="toc-summary-ê¸°ê°„ì§€ì •" class="nav-link" data-scroll-target="#summary-ê¸°ê°„ì§€ì •">summary ê¸°ê°„ì§€ì •</a></li>
  <li><a href="#plot-ê·¸ë˜í”„---ë²”ë¡€ì¶”ê°€" id="toc-plot-ê·¸ë˜í”„---ë²”ë¡€ì¶”ê°€" class="nav-link" data-scroll-target="#plot-ê·¸ë˜í”„---ë²”ë¡€ì¶”ê°€">plot ê·¸ë˜í”„ - ë²”ë¡€ì¶”ê°€</a></li>
  <li><a href="#ggsurvplot---risk.table-ì¶”ê°€í•˜ê¸°" id="toc-ggsurvplot---risk.table-ì¶”ê°€í•˜ê¸°" class="nav-link" data-scroll-target="#ggsurvplot---risk.table-ì¶”ê°€í•˜ê¸°">ggsurvplot - risk.table ì¶”ê°€í•˜ê¸°</a></li>
  <li><a href="#cox-ë‹¨ë³€ëŸ‰" id="toc-cox-ë‹¨ë³€ëŸ‰" class="nav-link" data-scroll-target="#cox-ë‹¨ë³€ëŸ‰">cox ë‹¨ë³€ëŸ‰</a></li>
  <li><a href="#cox-ë‹¨ë³€ëŸ‰-ë°˜ë³µ" id="toc-cox-ë‹¨ë³€ëŸ‰-ë°˜ë³µ" class="nav-link" data-scroll-target="#cox-ë‹¨ë³€ëŸ‰-ë°˜ë³µ">cox ë‹¨ë³€ëŸ‰ ë°˜ë³µ</a></li>
  <li><a href="#multivariate-analysis" id="toc-multivariate-analysis" class="nav-link" data-scroll-target="#multivariate-analysis">Multivariate Analysis</a></li>
  <li><a href="#multivariate---anova" id="toc-multivariate---anova" class="nav-link" data-scroll-target="#multivariate---anova">Multivariate - anova</a></li>
  <li><a href="#multivariate---refit" id="toc-multivariate---refit" class="nav-link" data-scroll-target="#multivariate---refit">Multivariate - refit</a></li>
  <li><a href="#survfit-plot" id="toc-survfit-plot" class="nav-link" data-scroll-target="#survfit-plot">survfit plot</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Survival Analysis with an deidentified Thyroid Cancer Dataset</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">Survival</div>
    <div class="quarto-category">hands-on</div>
  </div>
  </div>

<div>
  <div class="description">
    ìµëª…í™”ëœ ìë£Œë¡œ ì—°ìŠµí•˜ê¸°
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>RPythonStudyGroup feat. ChatGPT </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 3, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">February 3, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="git-clone" class="level3">
<h3 class="anchored" data-anchor-id="git-clone">git clone</h3>
<ul>
<li>ì›ê²©ì €ì¥ì†Œ HTTP url: https://github.com/RPythonGroup/Survival_Exercise.git</li>
<li>clone ì‹œ í´ë”ë¥¼ ì§€ì •í•˜ë©´ í˜„ì¬ í´ë” í•˜ë¶€ì— ì§€ì •í•˜ëŠ” í´ë”ëª…ìœ¼ë¡œ clone ë¨.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/RPythonGroup/Survival_Exercise.git R441-Survival_Exercise</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>í”„ë¡œì íŠ¸ë§Œë“¤ê¸°ì—ì„œ ê¸°ì¡´í´ë”ì—ì„œ ë§Œë“¤ê¸°ì—ì„œ cloneëœ í´ë”ë¥¼</li>
</ul>
</section>
<section id="readrds" class="level3">
<h3 class="anchored" data-anchor-id="readrds">readRDS</h3>
<ul>
<li>Rì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ìë£Œí˜•íƒœì¸ RDSë¥¼ ì½ì–´ì˜¤ë©°, ìë£Œí˜•ì´ ë³´ì „ë˜ê³  ë¹ ë¦„</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>rai_recur <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"deidentified_data/rai_recur.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mytable" class="level3">
<h3 class="anchored" data-anchor-id="mytable">mytable</h3>
<ul>
<li>mytableë¡œ ìë£Œ ê°œìš” íŒŒì•…</li>
<li>mylatex ì¶œë ¥ì€ ì„±ê³µí•˜ì§€ ëª»í•¨.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moonBook)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mytable(recur~.,data=rai_recur) %&gt;% mylatex() %&gt;% cat # ì •ìƒì‘ë™ì´ ë˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ”?</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mytable</span>(recur<span class="sc">~</span>.,<span class="at">data=</span>rai_recur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                     Descriptive Statistics by 'recur'                    
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 
                                      FALSE               TRUE          p  
                                     (N=1097)            (N=83)      
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 
 pt_id                          unique values:1179 unique values:1179      
 age                               48.2 Â± 10.9        42.4 Â± 12.5     0.000
 sex                                                                  0.001
   - F                             881 (80.3%)         53 (63.9%)          
   - M                             216 (19.7%)         30 (36.1%)          
 op_year                          2012.2 Â±  5.4      2008.6 Â±  6.2    0.000
 surgeon                                                              0.000
   - CIJ                            72 ( 6.6%)         1 ( 1.2%)           
   - GS                             19 ( 1.7%)         3 ( 3.6%)           
   - KCCH                           61 ( 5.6%)         2 ( 2.4%)           
   - LBC                           104 ( 9.5%)         6 ( 7.2%)           
   - LGH                           447 (40.7%)         29 (34.9%)          
   - LMC                           226 (20.6%)         8 ( 9.6%)           
   - LYS                            25 ( 2.3%)         5 ( 6.0%)           
   - OKK                            4 ( 0.4%)          2 ( 2.4%)           
   - outside                        63 ( 5.7%)         23 (27.7%)          
   - SYS                            76 ( 6.9%)         4 ( 4.8%)           
 Thyroidectomy_Type                                                   0.551
   - Lobectomy_Completion           64 ( 5.8%)         3 ( 3.6%)           
   - TT                            1033 (94.2%)        80 (96.4%)          
 ND_Type                                                              0.001
   - CND                           833 (75.9%)         45 (54.2%)          
   - FND                            9 ( 0.8%)          2 ( 2.4%)           
   - mRND                           2 ( 0.2%)          1 ( 1.2%)           
   - ND                             76 ( 6.9%)         10 (12.0%)          
   - Not Done                       37 ( 3.4%)         4 ( 4.8%)           
   - Picking                        7 ( 0.6%)          1 ( 1.2%)           
   - SND                           133 (12.1%)         20 (24.1%)          
 Risk                                                                 0.000
   - High                          178 (16.2%)         34 (41.0%)          
   - Intermediate                  535 (48.8%)         43 (51.8%)          
   - Low                           384 (35.0%)         6 ( 7.2%)           
 histology                                                            0.264
   - FTC                            24 ( 2.2%)          0 ( 0.0%)          
   - HTC                            2 ( 0.2%)          1 ( 1.2%)           
   - Mixed                          1 ( 0.1%)           0 ( 0.0%)          
   - PDTC                           2 ( 0.2%)           0 ( 0.0%)          
   - PTC                           1068 (97.4%)        82 (98.8%)          
 subtype                                                              0.065
   - clear_cell                     1 ( 0.1%)           0 ( 0.0%)          
   - conventional                  982 (89.5%)         79 (95.2%)          
   - cribriform-morular             1 ( 0.1%)           0 ( 0.0%)          
   - diffuse_sclerosing             5 ( 0.5%)          3 ( 3.6%)           
   - encapsulated_angioinvasive     4 ( 0.4%)           0 ( 0.0%)          
   - follicular                     60 ( 5.5%)          0 ( 0.0%)          
   - minimally_invasive             20 ( 1.8%)          0 ( 0.0%)          
   - oncocytic                      3 ( 0.3%)           0 ( 0.0%)          
   - poorly_differentiated          1 ( 0.1%)           0 ( 0.0%)          
   - solid                          3 ( 0.3%)           0 ( 0.0%)          
   - tall_cell                      16 ( 1.5%)         1 ( 1.2%)           
   - widely_invasive                1 ( 0.1%)           0 ( 0.0%)          
 pT                                                                   0.000
   - T1a                           486 (44.3%)         13 (15.7%)          
   - T1b                           387 (35.3%)         28 (33.7%)          
   - T2                            115 (10.5%)         19 (22.9%)          
   - T3a                            24 ( 2.2%)         6 ( 7.2%)           
   - T3b                            59 ( 5.4%)         6 ( 7.2%)           
   - T4a                            26 ( 2.4%)         10 (12.0%)          
   - T4b                             0 ( 0.0%)         1 ( 1.2%)           
 size                               1.3 Â±  0.9         2.2 Â±  1.7     0.000
 Multiplicity                                                         0.226
   - Multiple                      565 (51.5%)         49 (59.0%)          
   - Single                        532 (48.5%)         34 (41.0%)          
 ETE                                                                  0.142
   - N                             357 (32.5%)         20 (24.1%)          
   - Y                             740 (67.5%)         63 (75.9%)          
 gross_ETE                                                            0.000
   - N                             1017 (92.7%)        67 (80.7%)          
   - Y                              80 ( 7.3%)         16 (19.3%)          
 pN                                                                   0.000
   - N0                            335 (30.5%)         9 (10.8%)           
   - N1a                           499 (45.5%)         39 (47.0%)          
   - N1b                           205 (18.7%)         31 (37.3%)          
   - Nx                             58 ( 5.3%)         4 ( 4.8%)           
 ENE                                                                  0.001
   - N                             985 (89.8%)         64 (77.1%)          
   - Y                             112 (10.2%)         19 (22.9%)          
 time                              143.4 Â± 65.0       53.0 Â± 53.0     0.000
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” </code></pre>
</div>
</div>
</section>
<section id="surví•¨ìˆ˜" class="level3">
<h3 class="anchored" data-anchor-id="surví•¨ìˆ˜">Surví•¨ìˆ˜</h3>
<ul>
<li>timeê³¼ eventë¥¼ ì¸ìë¡œ ë°›ì•„ íŠ¹ìˆ˜í•œ í˜•íƒœì˜ matrixì¸ ìƒì¡´(survival) ê°ì²´ ë°˜í™˜</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>rai_recur<span class="sc">$</span>recur <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(rai_recur<span class="sc">$</span>recur)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>km <span class="ot">&lt;-</span> <span class="fu">Surv</span>(rai_recur<span class="sc">$</span>time, <span class="at">event =</span> rai_recur<span class="sc">$</span>recur) <span class="do">## default type : "right"</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># km &lt;- Surv(time=time, event = recur, data=rai_recur) # data= í˜•ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(km)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 'Surv' num [1:1180, 1:2] 387+ 124+ 176+ 113+ 242+  42+ 209+ 159+ 167+ 416+ ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:2] "time" "status"
 - attr(*, "type")= chr "right"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(km)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 387+ 124+ 176+ 113+ 242+  42+</code></pre>
</div>
</div>
</section>
<section id="plot" class="level3">
<h3 class="anchored" data-anchor-id="plot">plot</h3>
<ul>
<li>plot() í•¨ìˆ˜ëŠ” ì œë„¤ë¦­ í•¨ìˆ˜ë¡œ, ê¸°ë³¸ì ìœ¼ë¡œ ì‚°ì ë„ë¥¼ ê·¸ë¦¬ì§€ë§Œ, Surv ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ìœ¼ë©´ ë‚´ë¶€ì ìœ¼ë¡œ plot.survfit() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ Kaplan-Meier(KM) ê³¡ì„ ì„ ë°˜í™˜í•¨</li>
<li>timeì˜ ë‹¨ìœ„ê°€ ì›”ì´ë¼ì„œ x ì¶•ì€ 400ê¹Œì§€ í‘œì‹œë¨</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(km) <span class="do">## km - Surv class (time, status) ê°€ì§€ê³  ìˆëŠ” ë¦¬ìŠ¤íŠ¸</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/plot.survfit-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>survfit í•¨ìˆ˜ì˜ ì¸ì</strong>ë¡œ ì‚¬ìš©ë˜ë¯€ë¡œ ì¤‘ìš”</li>
</ul>
</section>
<section id="ì¤‘ì•™ê°’-ìƒì¡´ê¸°ê°„" class="level3">
<h3 class="anchored" data-anchor-id="ì¤‘ì•™ê°’-ìƒì¡´ê¸°ê°„">ì¤‘ì•™ê°’ ìƒì¡´ê¸°ê°„</h3>
<ul>
<li>50%ì— ë„ë‹¬í•˜ì§€ ëª»í•˜ì—¬ NA ë°˜í™˜ë¨</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(km)  <span class="do">## Surv ê°ì²´ì— ëŒ€í•œ method í•¨ìˆ˜ë“¤ì´ ìˆë‹¤.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$quantile
50 
NA 

$lower
50 
NA 

$upper
50 
NA </code></pre>
</div>
</div>
</section>
<section id="í‰ê· ìƒì¡´ê¸°ê°„" class="level3">
<h3 class="anchored" data-anchor-id="í‰ê· ìƒì¡´ê¸°ê°„">í‰ê· ìƒì¡´ê¸°ê°„</h3>
<ul>
<li>ì…ë ¥ì´ ê°œì›”ì´ë¯€ë¡œ ì¬ë°œ ê¸°ê°„ì˜ í‰ê·¬ì´ ì´ ì•½ 6ë…„?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(km)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 68.56186</code></pre>
</div>
</div>
</section>
<section id="survfití•¨ìˆ˜ì™€-ê°ì²´" class="level2">
<h2 class="anchored" data-anchor-id="survfití•¨ìˆ˜ì™€-ê°ì²´">survfití•¨ìˆ˜ì™€ ê°ì²´</h2>
<ul>
<li>Surv ê°ì²´ì™€ ê³µë³€ëŸ‰ì„ formula í˜•íƒœì˜ ì¸ìë¡œ ë°›ì•„ Kaplan-Meier ë˜ëŠ” Cox ëª¨ë¸ ê¸°ë°˜ ìƒì¡´ í™•ë¥ ì„ ì €ì¥í•œ ê°ì²´ë¥¼ ë°˜í™˜</li>
</ul>
<section id="kaplan-meier-ê¸°ë°˜" class="level3">
<h3 class="anchored" data-anchor-id="kaplan-meier-ê¸°ë°˜">Kaplan-Meier ê¸°ë°˜</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">survfit</span>(km<span class="sc">~</span><span class="dv">1</span>)) <span class="co">#Kaplan-Meier ê¸°ë°˜</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/plot_survfit-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="cox-model-ê¸°ë°˜" class="level3">
<h3 class="anchored" data-anchor-id="cox-model-ê¸°ë°˜">cox model ê¸°ë°˜</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>km_fit <span class="ot">&lt;-</span> <span class="fu">survfit</span>(km<span class="sc">~</span>rai_recur<span class="sc">$</span>sex) <span class="co">#cox model ê¸°ë°˜</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(km_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/plot_cox-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">summary</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(km_fit) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call: survfit(formula = km ~ rai_recur$sex)

                rai_recur$sex=F 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    6    934       2    0.998 0.00151        0.995        1.000
    8    932       2    0.996 0.00214        0.992        1.000
    9    930       1    0.995 0.00239        0.990        0.999
   10    929       1    0.994 0.00261        0.988        0.999
   11    928       2    0.991 0.00302        0.986        0.997
   12    926       1    0.990 0.00320        0.984        0.997
   13    925       5    0.985 0.00398        0.977        0.993
   14    920       3    0.982 0.00437        0.973        0.990
   15    917       2    0.980 0.00462        0.971        0.989
   17    915       1    0.979 0.00474        0.969        0.988
   23    902       1    0.978 0.00485        0.968        0.987
   25    898       2    0.975 0.00508        0.965        0.985
   26    895       2    0.973 0.00530        0.963        0.984
   28    888       2    0.971 0.00551        0.960        0.982
   30    883       1    0.970 0.00561        0.959        0.981
   31    880       1    0.969 0.00571        0.958        0.980
   32    878       1    0.968 0.00581        0.956        0.979
   33    876       1    0.967 0.00591        0.955        0.978
   36    868       1    0.965 0.00601        0.954        0.977
   42    850       1    0.964 0.00611        0.952        0.976
   44    846       1    0.963 0.00620        0.951        0.975
   45    844       1    0.962 0.00630        0.950        0.974
   57    820       1    0.961 0.00640        0.948        0.973
   59    816       1    0.960 0.00650        0.947        0.972
   61    804       1    0.958 0.00660        0.946        0.971
   70    787       1    0.957 0.00670        0.944        0.970
   74    767       1    0.956 0.00681        0.943        0.969
   78    762       1    0.955 0.00692        0.941        0.968
   79    759       2    0.952 0.00712        0.938        0.966
   85    753       1    0.951 0.00722        0.937        0.965
   88    745       1    0.950 0.00733        0.935        0.964
   90    740       1    0.948 0.00743        0.934        0.963
   97    720       1    0.947 0.00753        0.932        0.962
  100    710       1    0.946 0.00764        0.931        0.961
  139    510       1    0.944 0.00785        0.929        0.959
  149    436       1    0.942 0.00812        0.926        0.958
  188    161       1    0.936 0.00996        0.917        0.956
  251     47       1    0.916 0.02198        0.874        0.960
  276     35       1    0.890 0.03348        0.827        0.958

                rai_recur$sex=M 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    8    246       1    0.996 0.00406        0.988        1.000
    9    245       1    0.992 0.00573        0.981        1.000
   11    244       1    0.988 0.00700        0.974        1.000
   19    242       1    0.984 0.00807        0.968        1.000
   20    240       1    0.980 0.00902        0.962        0.997
   24    234       2    0.971 0.01071        0.950        0.992
   25    232       1    0.967 0.01145        0.945        0.990
   26    231       1    0.963 0.01214        0.939        0.987
   29    228       1    0.959 0.01280        0.934        0.984
   32    225       1    0.954 0.01344        0.928        0.981
   38    219       1    0.950 0.01407        0.923        0.978
   41    218       1    0.946 0.01466        0.917        0.975
   44    216       2    0.937 0.01578        0.907        0.968
   46    212       2    0.928 0.01682        0.896        0.962
   49    206       1    0.924 0.01733        0.890        0.958
   51    204       1    0.919 0.01783        0.885        0.955
   52    203       1    0.915 0.01831        0.879        0.951
   53    201       1    0.910 0.01877        0.874        0.948
   60    188       1    0.905 0.01929        0.868        0.944
   63    183       1    0.900 0.01981        0.862        0.940
   71    168       1    0.895 0.02040        0.856        0.936
  103    145       2    0.882 0.02191        0.841        0.926
  118    133       1    0.876 0.02272        0.832        0.922
  138    116       1    0.868 0.02375        0.823        0.916
  149     92       1    0.859 0.02530        0.811        0.910
  176     46       1    0.840 0.03088        0.782        0.903</code></pre>
</div>
</div>
</section>
<section id="summary-ê¸°ê°„ì§€ì •" class="level3">
<h3 class="anchored" data-anchor-id="summary-ê¸°ê°„ì§€ì •">summary ê¸°ê°„ì§€ì •</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(km_fit, <span class="fu">c</span>(<span class="dv">12</span><span class="sc">*</span><span class="dv">1</span><span class="sc">:</span><span class="dv">19</span>)) <span class="do">### ì •í•´ì§„ timeì— ë§ëŠ” ìƒì¡´í…Œì´ë¸”í‘œë¥¼ ë§Œë“ ë‹¤.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call: survfit(formula = km ~ rai_recur$sex)

                rai_recur$sex=F 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
   12    926       9    0.990 0.00320        0.984        0.997
   24    898      12    0.978 0.00485        0.968        0.987
   36    868      11    0.965 0.00601        0.954        0.977
   48    833       3    0.962 0.00630        0.950        0.974
   60    809       2    0.960 0.00650        0.947        0.972
   72    777       2    0.957 0.00670        0.944        0.970
   84    753       4    0.952 0.00712        0.938        0.966
   96    723       3    0.948 0.00743        0.934        0.963
  108    687       2    0.946 0.00764        0.931        0.961
  120    641       0    0.946 0.00764        0.931        0.961
  132    559       0    0.946 0.00764        0.931        0.961
  144    474       1    0.944 0.00785        0.929        0.959
  156    373       1    0.942 0.00812        0.926        0.958
  168    297       0    0.942 0.00812        0.926        0.958
  180    189       0    0.942 0.00812        0.926        0.958
  192    143       1    0.936 0.00996        0.917        0.956
  204    113       0    0.936 0.00996        0.917        0.956
  216     88       0    0.936 0.00996        0.917        0.956
  228     63       0    0.936 0.00996        0.917        0.956

                rai_recur$sex=M 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
   12    242       3    0.988  0.0070        0.974        1.000
   24    234       4    0.971  0.0107        0.950        0.992
   36    220       4    0.954  0.0134        0.928        0.981
   48    208       6    0.928  0.0168        0.896        0.962
   60    188       5    0.905  0.0193        0.868        0.944
   72    164       2    0.895  0.0204        0.856        0.936
   84    157       0    0.895  0.0204        0.856        0.936
   96    146       0    0.895  0.0204        0.856        0.936
  108    137       2    0.882  0.0219        0.841        0.926
  120    131       1    0.876  0.0227        0.832        0.922
  132    122       0    0.876  0.0227        0.832        0.922
  144    105       1    0.868  0.0237        0.823        0.916
  156     75       1    0.859  0.0253        0.811        0.910
  168     54       0    0.859  0.0253        0.811        0.910
  180     40       1    0.840  0.0309        0.782        0.903
  192     33       0    0.840  0.0309        0.782        0.903
  204     26       0    0.840  0.0309        0.782        0.903
  216     19       0    0.840  0.0309        0.782        0.903
  228     15       0    0.840  0.0309        0.782        0.903</code></pre>
</div>
</div>
</section>
<section id="plot-ê·¸ë˜í”„---ë²”ë¡€ì¶”ê°€" class="level3">
<h3 class="anchored" data-anchor-id="plot-ê·¸ë˜í”„---ë²”ë¡€ì¶”ê°€">plot ê·¸ë˜í”„ - ë²”ë¡€ì¶”ê°€</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(km_fit, <span class="at">col =</span> <span class="fu">rainbow</span>(<span class="dv">2</span>), <span class="at">lty=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Female"</span>,<span class="st">"Male"</span>),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="at">col=</span> <span class="fu">rainbow</span>(<span class="dv">2</span>), <span class="at">lty=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/plot_cox2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ggsurvplot---risk.table-ì¶”ê°€í•˜ê¸°" class="level3">
<h3 class="anchored" data-anchor-id="ggsurvplot---risk.table-ì¶”ê°€í•˜ê¸°">ggsurvplot - risk.table ì¶”ê°€í•˜ê¸°</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'survminer' was built under R version 4.4.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggplot2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggpubr</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'survminer'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:survival':

    myeloma</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  km_fit, </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> rai_recur,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">conf.int =</span> T, </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">xscale =</span> <span class="dv">12</span>, <span class="do">## xscale can be "d_y"</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">break.x.by =</span> <span class="dv">5</span><span class="sc">*</span><span class="dv">12</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> T, </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval.size =</span><span class="dv">4</span>, </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">surv.median.line =</span> <span class="st">"hv"</span>,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">risk.table =</span> <span class="cn">TRUE</span>, <span class="do">## if TRUE, risk table is displayed under graph</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.title=</span><span class="st">"sex"</span>, </span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs=</span><span class="fu">c</span>(<span class="st">"Female"</span>,<span class="st">"Male"</span>),</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#E7B800"</span>, <span class="st">"#2E9FDF"</span>),</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in .add_surv_median(p, fit, type = surv.median.line, fun = fun, :
Median survival not reached.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/ggsurvplot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="cox-ë‹¨ë³€ëŸ‰" class="level3">
<h3 class="anchored" data-anchor-id="cox-ë‹¨ë³€ëŸ‰">cox ë‹¨ë³€ëŸ‰</h3>
<p><span class="math display">\[
h(t | X) = h_0(t) \exp(\beta_1 X_1 + \beta_2 X_2 + \dots + \beta_p X_p)
\]</span> #### sexì— ëŒ€í•œ ë‹¨ë³€ëŸ‰</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>univariate_model <span class="ot">&lt;-</span> <span class="fu">coxph</span>(km <span class="sc">~</span> sex, <span class="at">data =</span> rai_recur)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(univariate_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = km ~ sex, data = rai_recur)

  n= 1180, number of events= 83 

       coef exp(coef) se(coef)     z Pr(&gt;|z|)    
sexM 0.8430    2.3233   0.2287 3.686 0.000228 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     exp(coef) exp(-coef) lower .95 upper .95
sexM     2.323     0.4304     1.484     3.637

Concordance= 0.58  (se = 0.027 )
Likelihood ratio test= 12.29  on 1 df,   p=5e-04
Wald test            = 13.59  on 1 df,   p=2e-04
Score (logrank) test = 14.41  on 1 df,   p=1e-04</code></pre>
</div>
</div>
<section id="ê²€ì •-ë°©ë²•ì˜-ì°¨ì´" class="level4">
<h4 class="anchored" data-anchor-id="ê²€ì •-ë°©ë²•ì˜-ì°¨ì´">1ï¸âƒ£ ê²€ì • ë°©ë²•ì˜ ì°¨ì´</h4>
<ul>
<li>Likelihood Ratio Test: ëª¨ë¸ ì „ì²´ì˜ ì í•©ë„ë¥¼ í‰ê°€í•˜ëŠ” ê°•ë ¥í•œ ê²€ì • ë°©ë²•.</li>
<li>Wald Test: ê°œë³„ íšŒê·€ ê³„ìˆ˜ê°€ 0ê³¼ ë‹¤ë¥¸ì§€ í‰ê°€í•˜ì§€ë§Œ, ìƒ˜í”Œ í¬ê¸°ê°€ ì‘ê±°ë‚˜ ê³„ìˆ˜ê°€ ë§¤ìš° í¬ë©´ ë¶€ì •í™•í•  ìˆ˜ ìˆìŒ.</li>
<li>Score Test: ì‘ì€ ìƒ˜í”Œì—ì„œë„ ì•ˆì •ì ì¸ ê²€ì •ì´ì§€ë§Œ, ì¼ë¶€ ê°€ì •ì´ ì¶©ì¡±ë˜ì§€ ì•Šìœ¼ë©´ ê²°ê³¼ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ.</li>
</ul>
</section>
<section id="ìƒ˜í”Œ-í¬ê¸°-ë°-ë°ì´í„°-íŠ¹ì„±" class="level4">
<h4 class="anchored" data-anchor-id="ìƒ˜í”Œ-í¬ê¸°-ë°-ë°ì´í„°-íŠ¹ì„±">2ï¸âƒ£ ìƒ˜í”Œ í¬ê¸° ë° ë°ì´í„° íŠ¹ì„±</h4>
<ul>
<li>ìƒ˜í”Œ í¬ê¸°ê°€ ì‘ì„ ë•Œ â†’ Wald TestëŠ” ë¶ˆì•ˆì •í•  ìˆ˜ ìˆìŒ.</li>
<li>ë³€ìˆ˜ ê°„ ë‹¤ì¤‘ê³µì„ ì„± â†’ Wald Testì™€ LRT ê²°ê³¼ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ.</li>
<li>ê²€ì—´ ë°ì´í„° ë¹„ìœ¨ì´ ë†’ì„ ë•Œ â†’ Score Testê°€ ë‹¤ë¥¸ ë‘ ê²€ì •ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ.</li>
</ul>
</section>
<section id="likelihood-ratio-testë§Œ-ìœ ì˜ë¯¸í•˜ê³ -ë‚˜ë¨¸ì§€ëŠ”-ìœ ì˜ë¯¸í•˜ì§€-ì•Šë‹¤ë©´" class="level4">
<h4 class="anchored" data-anchor-id="likelihood-ratio-testë§Œ-ìœ ì˜ë¯¸í•˜ê³ -ë‚˜ë¨¸ì§€ëŠ”-ìœ ì˜ë¯¸í•˜ì§€-ì•Šë‹¤ë©´"><strong>ğŸ“Œ (1) Likelihood Ratio Testë§Œ ìœ ì˜ë¯¸í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ìœ ì˜ë¯¸í•˜ì§€ ì•Šë‹¤ë©´?</strong></h4>
<ul>
<li>ëª¨ë¸ì´ ì „ì²´ì ìœ¼ë¡œëŠ” ì˜ë¯¸ê°€ ìˆì§€ë§Œ, ê°œë³„ ë³€ìˆ˜ì˜ íš¨ê³¼ê°€ ê°•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.<br>
</li>
<li>Wald Testì™€ Score Testë„ í™•ì¸í•˜ë©´ì„œ <strong>ê°œë³„ ë³€ìˆ˜ì˜ ê¸°ì—¬ë„ë¥¼ ë¶„ì„</strong>í•´ì•¼ í•¨.</li>
</ul>
</section>
<section id="wald-testë§Œ-ìœ ì˜ë¯¸í•˜ë‹¤ë©´" class="level4">
<h4 class="anchored" data-anchor-id="wald-testë§Œ-ìœ ì˜ë¯¸í•˜ë‹¤ë©´"><strong>ğŸ“Œ (2) Wald Testë§Œ ìœ ì˜ë¯¸í•˜ë‹¤ë©´?</strong></h4>
<ul>
<li>íŠ¹ì • ë³€ìˆ˜ì˜ íš¨ê³¼ëŠ” ê°•í•˜ì§€ë§Œ, ëª¨ë¸ ì „ì²´ê°€ ë°ì´í„°ë¥¼ ì¶©ë¶„íˆ ì„¤ëª…í•˜ì§€ ëª»í•  ìˆ˜ ìˆìŒ.<br>
</li>
<li>ë³€ìˆ˜ ì„ íƒì„ ë‹¤ì‹œ ê²€í† í•˜ê³  ë‹¤ì¤‘ê³µì„ ì„±ì„ ì ê²€í•´ì•¼ í•¨.</li>
</ul>
</section>
<section id="score-testë§Œ-ìœ ì˜ë¯¸í•˜ë‹¤ë©´" class="level4">
<h4 class="anchored" data-anchor-id="score-testë§Œ-ìœ ì˜ë¯¸í•˜ë‹¤ë©´"><strong>ğŸ“Œ (3) Score Testë§Œ ìœ ì˜ë¯¸í•˜ë‹¤ë©´?</strong></h4>
<ul>
<li>ë°ì´í„°ê°€ ì˜ ë§ì§€ë§Œ, íŠ¹ì • ë³€ìˆ˜ì˜ íš¨ê³¼ê°€ ë¶ˆí™•ì‹¤í•  ê°€ëŠ¥ì„±ì´ ìˆìŒ.<br>
</li>
<li>ëª¨ë¸ì˜ êµ¬ì¡°ì™€ ë°ì´í„°ì˜ ë¶„í¬ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì•¼ í•¨.</li>
</ul>
</section>
</section>
<section id="cox-ë‹¨ë³€ëŸ‰-ë°˜ë³µ" class="level3">
<h3 class="anchored" data-anchor-id="cox-ë‹¨ë³€ëŸ‰-ë°˜ë³µ">cox ë‹¨ë³€ëŸ‰ ë°˜ë³µ</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mycph</span>(<span class="fu">Surv</span>(time, recur) <span class="sc">~</span> sex<span class="sc">+</span>surgeon<span class="sc">+</span>Risk<span class="sc">+</span>pT<span class="sc">+</span>gross_ETE<span class="sc">+</span>pN<span class="sc">+</span>ENE, <span class="at">data =</span> rai_recur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 mycph : perform coxph of individual expecting variables

 Call: Surv(time, recur) ~ sex + surgeon + Risk + pT + gross_ETE + pN +     ENE, data= rai_recur </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     HR   lcl    ucl     p
sexM               2.32  1.48   3.64 0.000
surgeonGS          8.87  0.92  85.71 0.059
surgeonKCCH        2.50  0.23  27.64 0.454
surgeonLBC         3.88  0.47  32.25 0.209
surgeonLGH         4.44  0.61  32.63 0.142
surgeonLMC         3.05  0.38  24.40 0.293
surgeonLYS        11.07  1.29  95.20 0.028
surgeonOKK        18.73  1.67 209.73 0.017
surgeonoutside    19.61  2.64 145.48 0.004
surgeonSYS         3.13  0.35  28.06 0.309
RiskIntermediate   0.39  0.25   0.62 0.000
RiskLow            0.08  0.03   0.19 0.000
pTT1b              2.65  1.37   5.12 0.004
pTT2               5.63  2.77  11.42 0.000
pTT3a              7.86  2.98  20.75 0.000
pTT3b              4.04  1.53  10.64 0.005
pTT4a             12.51  5.47  28.57 0.000
pTT4b            110.48 14.15 862.67 0.000
gross_ETEY         3.01  1.74   5.19 0.000
pNN1a              2.89  1.40   5.96 0.004
pNN1b              5.88  2.80  12.36 0.000
pNNx               1.92  0.58   6.34 0.285
ENEY               2.96  1.76   4.97 0.000</code></pre>
</div>
</div>
</section>
<section id="multivariate-analysis" class="level3">
<h3 class="anchored" data-anchor-id="multivariate-analysis">Multivariate Analysis</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>cox_model1 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(time, recur) <span class="sc">~</span> sex<span class="sc">+</span>surgeon<span class="sc">+</span>Risk<span class="sc">+</span>pT<span class="sc">+</span>gross_ETE<span class="sc">+</span>pN<span class="sc">+</span>ENE, <span class="at">data =</span> rai_recur)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(time, recur) ~ sex + surgeon + Risk + pT + 
    gross_ETE + pN + ENE, data = rai_recur)

  n= 1180, number of events= 83 

                     coef exp(coef) se(coef)      z Pr(&gt;|z|)   
sexM              0.45143   1.57055  0.25124  1.797  0.07237 . 
surgeonGS         1.82111   6.17873  1.17355  1.552  0.12071   
surgeonKCCH       0.84534   2.32877  1.23979  0.682  0.49534   
surgeonLBC        1.33518   3.80069  1.08259  1.233  0.21746   
surgeonLGH        1.39732   4.04434  1.02052  1.369  0.17093   
surgeonLMC        0.96762   2.63166  1.06429  0.909  0.36326   
surgeonLYS        2.35394  10.52698  1.12773  2.087  0.03686 * 
surgeonOKK        2.41672  11.20906  1.24459  1.942  0.05216 . 
surgeonoutside    2.53862  12.66221  1.02984  2.465  0.01370 * 
surgeonSYS        1.21122   3.35757  1.12605  1.076  0.28209   
RiskIntermediate -1.10109   0.33251  0.48798 -2.256  0.02404 * 
RiskLow          -1.94527   0.14295  0.69673 -2.792  0.00524 **
pTT1b             0.27864   1.32134  0.39790  0.700  0.48375   
pTT2              0.93086   2.53669  0.41840  2.225  0.02610 * 
pTT3a             1.33031   3.78220  0.56006  2.375  0.01753 * 
pTT3b            -0.01178   0.98829  0.78975 -0.015  0.98810   
pTT4a             0.68142   1.97669  0.73389  0.929  0.35315   
pTT4b             2.56213  12.96338  1.41329  1.813  0.06985 . 
gross_ETEY       -0.02956   0.97087  0.70231 -0.042  0.96643   
pNN1a             0.68781   1.98935  0.38041  1.808  0.07059 . 
pNN1b             0.87216   2.39207  0.41729  2.090  0.03661 * 
pNNx             -0.27631   0.75858  0.63063 -0.438  0.66128   
ENEY             -0.53707   0.58446  0.46306 -1.160  0.24612   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                 exp(coef) exp(-coef) lower .95 upper .95
sexM                1.5706    0.63672   0.95983    2.5699
surgeonGS           6.1787    0.16185   0.61940   61.6354
surgeonKCCH         2.3288    0.42941   0.20503   26.4507
surgeonLBC          3.8007    0.26311   0.45537   31.7224
surgeonLGH          4.0443    0.24726   0.54724   29.8895
surgeonLMC          2.6317    0.37999   0.32682   21.1911
surgeonLYS         10.5270    0.09499   1.15445   95.9916
surgeonOKK         11.2091    0.08921   0.97762  128.5198
surgeonoutside     12.6622    0.07898   1.68232   95.3038
surgeonSYS          3.3576    0.29783   0.36943   30.5153
RiskIntermediate    0.3325    3.00745   0.12777    0.8653
RiskLow             0.1429    6.99550   0.03649    0.5601
pTT1b               1.3213    0.75681   0.60578    2.8821
pTT2                2.5367    0.39422   1.11717    5.7599
pTT3a               3.7822    0.26440   1.26190   11.3361
pTT3b               0.9883    1.01185   0.21021    4.6465
pTT4a               1.9767    0.50590   0.46908    8.3297
pTT4b              12.9634    0.07714   0.81232  206.8754
gross_ETEY          0.9709    1.03000   0.24511    3.8457
pNN1a               1.9894    0.50268   0.94386    4.1929
pNN1b               2.3921    0.41805   1.05579    5.4196
pNNx                0.7586    1.31826   0.22040    2.6109
ENEY                0.5845    1.71098   0.23583    1.4485

Concordance= 0.792  (se = 0.024 )
Likelihood ratio test= 112.5  on 23 df,   p=9e-14
Wald test            = 110.8  on 23 df,   p=2e-13
Score (logrank) test = 176.7  on 23 df,   p=&lt;2e-16</code></pre>
</div>
</div>
</section>
<section id="multivariate---anova" class="level3">
<h3 class="anchored" data-anchor-id="multivariate---anova">Multivariate - anova</h3>
<ul>
<li>anova(cox_model1)ëŠ” Cox íšŒê·€ ëª¨ë¸ì—ì„œ ê° ë³€ìˆ˜ì˜ ê¸°ì—¬ë„ë¥¼ í‰ê°€í•˜ëŠ” ì—­í• ì„ í•¨.</li>
<li>ê° ë³€ìˆ˜ê°€ ëª¨ë¸ì— ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ í‰ê°€í•˜ê³ , p-valueë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë³€ìˆ˜ë¥¼ ì œê±°í•  ìˆ˜ ìˆìŒ.</li>
<li>Deviance ê°’ì´ í¬ê³  p-valueê°€ ë‚®ì€ ë³€ìˆ˜ëŠ” ì¤‘ìš”í•œ ë³€ìˆ˜ì´ë©°, p-valueê°€ ë†’ìœ¼ë©´ ì œê±°ë¥¼ ê³ ë ¤í•  ìˆ˜ ìˆìŒ.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(cox_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table
 Cox model: response is Surv(time, recur)
Terms added sequentially (first to last)

           loglik   Chisq Df Pr(&gt;|Chi|)    
NULL      -567.06                          
sex       -560.92 12.2949  1  0.0004542 ***
surgeon   -540.38 41.0665  9  4.864e-06 ***
Risk      -521.33 38.1136  2  5.293e-09 ***
pT        -515.05 12.5592  6  0.0505954 .  
gross_ETE -515.03  0.0306  1  0.8610979    
pN        -511.51  7.0409  3  0.0706054 .  
ENE       -510.84  1.3484  1  0.2455630    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<ul>
<li>Cox íšŒê·€ ëª¨ë¸ì—ì„œëŠ” ë¡œê·¸ ìš°ë„ë¥¼ ìµœëŒ€í™”(ì¦‰, ëœ ìŒìˆ˜ë¡œ ë§Œë“¦) í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ìµœì í™”ë¥¼ ìˆ˜í–‰
<ul>
<li>NULL ëª¨ë¸ (loglik = -567.06) â†’ ë³€ìˆ˜ê°€ ì—†ëŠ” ê¸°ë³¸ ëª¨ë¸</li>
<li>ëª¨ë¸ì´ ì ì  ì¢‹ì•„ì§ˆìˆ˜ë¡ loglik ê°’ ì¦ê°€</li>
<li>sex ì¶”ê°€ í›„: loglik = -560.92 (ì¦ê°€)</li>
<li>surgeon ì¶”ê°€ í›„: loglik = -540.38 (ë” ì¦ê°€)</li>
<li>Risk ì¶”ê°€ í›„: loglik = -521.33 (ë” ì¦ê°€)</li>
</ul></li>
</ul>
</section>
<section id="multivariate---refit" class="level3">
<h3 class="anchored" data-anchor-id="multivariate---refit">Multivariate - refit</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>cox_model_refit <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(time, recur) <span class="sc">~</span> sex<span class="sc">+</span>surgeon<span class="sc">+</span>Risk, <span class="at">data =</span> rai_recur)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_model_refit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(time, recur) ~ sex + surgeon + Risk, data = rai_recur)

  n= 1180, number of events= 83 

                    coef exp(coef) se(coef)      z Pr(&gt;|z|)    
sexM              0.4982    1.6457   0.2395  2.080 0.037565 *  
surgeonGS         2.1328    8.4382   1.1591  1.840 0.065765 .  
surgeonKCCH       1.0549    2.8717   1.2288  0.859 0.390615    
surgeonLBC        1.4876    4.4264   1.0806  1.377 0.168610    
surgeonLGH        1.4732    4.3630   1.0184  1.447 0.148017    
surgeonLMC        1.0942    2.9867   1.0618  1.030 0.302797    
surgeonLYS        2.4262   11.3163   1.0983  2.209 0.027169 *  
surgeonOKK        2.7836   16.1772   1.2349  2.254 0.024193 *  
surgeonoutside    2.7641   15.8650   1.0244  2.698 0.006967 ** 
surgeonSYS        1.3356    3.8024   1.1204  1.192 0.233240    
RiskIntermediate -0.9051    0.4045   0.2375 -3.811 0.000139 ***
RiskLow          -2.2999    0.1003   0.4506 -5.105 3.31e-07 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                 exp(coef) exp(-coef) lower .95 upper .95
sexM                1.6457    0.60765   1.02906    2.6318
surgeonGS           8.4382    0.11851   0.87021   81.8234
surgeonKCCH         2.8717    0.34822   0.25835   31.9211
surgeonLBC          4.4264    0.22592   0.53245   36.7971
surgeonLGH          4.3630    0.22920   0.59284   32.1094
surgeonLMC          2.9867    0.33482   0.37270   23.9346
surgeonLYS         11.3163    0.08837   1.31470   97.4044
surgeonOKK         16.1772    0.06182   1.43790  182.0038
surgeonoutside     15.8650    0.06303   2.13064  118.1329
surgeonSYS          3.8024    0.26299   0.42299   34.1799
RiskIntermediate    0.4045    2.47207   0.25397    0.6443
RiskLow             0.1003    9.97356   0.04146    0.2425

Concordance= 0.761  (se = 0.025 )
Likelihood ratio test= 91.47  on 12 df,   p=3e-14
Wald test            = 86.44  on 12 df,   p=2e-13
Score (logrank) test = 114.2  on 12 df,   p=&lt;2e-16</code></pre>
</div>
</div>
</section>
<section id="survfit-plot" class="level3">
<h3 class="anchored" data-anchor-id="survfit-plot">survfit plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">survfit</span>(cox_model1), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">0.6</span>,<span class="dv">1</span>),<span class="at">xlab =</span> <span class="st">"months"</span>,</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="at">ylab =</span> <span class="st">"Proportion not reached"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/plot3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>